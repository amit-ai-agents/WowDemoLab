<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>AI Architecture Layout</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

    <style>
        body {
            background: #111;
            color: #fff;
            padding: 20px;
            font-family: 'Segoe UI', sans-serif;
        }

        h2 {
            text-align: center;
            margin-bottom: 40px;
        }

        #vertical-layers {
            display: flex;
            flex-direction: row;
            gap: 20px;
            overflow-x: auto;
            margin-bottom: 10px;
        }

        #horizontal-layers {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .layer-container {
            border: 2px solid #555;
            border-radius: 10px;
            padding: 10px;
            background-color: #1e1e1e;
            display: flex;
            overflow-y: auto;
        }

        .layer-title {
            font-weight: bold;
            font-size: 1rem;
            color: #ffc107;
            margin-bottom: 8px;
            text-align: center;
            width: 100%;
        }

        .layer-vertical {
            flex-direction: column;
            height: 50vh;
            width: 11vw;
            flex-shrink: 0;
            display: flex;
            align-items: stretch;
        }

        .layer-horizontal {
            flex-direction: column;
            height: 12vh;
            width: 90%;
            display: flex;
            align-items: center;
            margin-left:20px;
        }

        .horizontal-components {
            display: flex;
            flex-direction: row;
            gap: 10px;
            justify-content: center;
            flex-wrap: nowrap;
            overflow-x: auto;
            width: 100%;
        }

        .component-card {
            background-color: #222;
            border: 1px solid #555;
            border-radius: 5px;
            padding: 6px 10px;
            font-size: 0.7rem;
            color: #fff;
            min-width: 120px;
            max-width: 200px;
        }

        .component-title {
            font-weight: 500;
            margin-bottom: 4px;
            color: #0dcaf0;
        }

        @media (max-width: 768px) {
            .layer-vertical {
                width: 60vw;
                height: 40vh;
            }

            .layer-horizontal {
                height: auto;
            }

            .component-card {
                font-size: 0.8rem;
                min-width: 100px;
            }

            .layer-title {
                font-size: 1rem;
            }
        }
    </style>
</head>

<body>
    <h2>AI Architecture View</h2>

    <div id="architecture" style="background-color:black;" class="col-md-8">
        <div id="vertical-layers" style="margin-left:10px;"></div>
        <div id="horizontal-layers"></div>
    </div>

    <script>
        $(document).ready(function () {
            $.getJSON("/static/data/architecture.json", function (architecture) {
                const layers = architecture.ModernDataAIReferenceArchitecture.Layers;
                const $vertical = $('#vertical-layers');
                const $horizontal = $('#horizontal-layers');

                layers.forEach(layer => {
                    const isVertical = layer.orientation === 'vertical';
                    const $layerDiv = $('<div class="layer-container"></div>').addClass(isVertical ? 'layer-vertical' : 'layer-horizontal');
                    const $title = $('<div class="layer-title"></div>').text(layer.name);

                    $layerDiv.append($title);

                    if (isVertical) {
                        Object.entries(layer.components).forEach(([key, value]) => {
                            const $card = $('<div class="component-card"></div>');
                            $card.append($('<div class="component-title"></div>').text(key));
                            if (Array.isArray(value)) {
                                value.forEach(item => $card.append($('<div></div>').text(`- ${item}`)));
                            } else if (typeof value === 'string') {
                                $card.append($('<div></div>').text(value));
                            } else if (value === true) {
                                $card.append($('<div></div>').html('<span class="text-success">✓ Enabled</span>'));
                            }
                            $layerDiv.append($card);
                        });
                        $vertical.append($layerDiv);
                    } else {
                        const $componentsWrapper = $('<div class="horizontal-components"></div>');
                        Object.entries(layer.components).forEach(([key, value]) => {
                            const $card = $('<div class="component-card"></div>');
                            $card.append($('<div class="component-title"></div>').text(key));
                            if (Array.isArray(value)) {
                                value.forEach(item => $card.append($('<div></div>').text(`- ${item}`)));
                            } else if (typeof value === 'string') {
                                $card.append($('<div></div>').text(value));
                            } else if (value === true) {
                                $card.append($('<div></div>').html('<span class="text-success">✓ Enabled</span>'));
                            }
                            $componentsWrapper.append($card);
                        });
                        $layerDiv.append($componentsWrapper);
                        $horizontal.append($layerDiv);
                    }
                });
            });
        });
    </script>
</body>
</html>
